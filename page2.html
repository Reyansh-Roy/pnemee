<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>INITIATION PROTOCOL: PSYCHOLOGICAL FINGERPRINTING</title>
  <meta name="viewport" content="width=900, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="icon" href="data:," />
  <style>
    html, body {
      height: 100%; margin: 0; padding: 0;
      background: #111;
      color: #C9D8EA;
      font-family: 'Fira Mono', 'Roboto Mono', 'Menlo', monospace;
      overflow: hidden;
    }
    body {
      min-width: 900px;
      min-height: 650px;
      position: relative;
    }
    /* Digital circuit overlay */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
      opacity: 0.08;
      background: url('data:image/svg+xml;utf8,<svg width="100%" height="100%" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><rect x="30" y="40" width="100" height="1" fill="white" opacity="0.5"/><rect x="30" y="110" width="160" height="1" fill="white" opacity="0.5"/><rect x="120" y="40" width="1" height="70" fill="white" opacity="0.4"/><circle cx="90" cy="40" r="3" fill="white" opacity="0.5"/><circle cx="120" cy="110" r="2" fill="white" opacity="0.6"/></svg>');
      background-repeat: repeat;
    }
    /* Header */
    .header {
      width: 100vw;
      text-align: center;
      font-size: 1.08rem;
      letter-spacing: 0.07em;
      color: #8CA1C5;
      text-transform: uppercase;
      font-family: inherit;
      font-weight: 600;
      margin-top: 35px;
      z-index: 2;
      position: relative;
      user-select: none;
    }
    .timer {
      position: absolute;
      top: 36px; right: 42px;
      font-family: inherit;
      color: #EF5350;
      background: rgba(25,22,25,0.76);
      padding: 2px 20px 2px 15px;
      font-size: 1.04rem;
      letter-spacing: 0.08em;
      border-radius: 5px;
      font-variant-numeric: tabular-nums;
      width: 212px;
      text-align: right;
      box-sizing: border-box;
      user-select: none;
      z-index: 2;
      font-weight: 500;
      border: 1.5px solid #E35C5C44;
    }
    /* Question */
    .question {
      text-align: center;
      font-size: 2.14rem;
      color: #C9D8EA;
      font-family: inherit;
      font-weight: 700;
      margin-top: 84px;
      z-index: 3;
      position: relative;
      user-select: none;
      line-height: 1.18;
      letter-spacing: 0.03em;
      text-shadow: 0 2px 16px #06090c9a;
    }
    /* Silhouette */
    .silhouette {
      position: absolute;
      left: 50%; top: 51%;
      transform: translate(-50%,-51%);
      z-index: 1;
      opacity: 0.7;
      width: 500px; max-width: 62vw;
      pointer-events: none;
      user-select: none;
      transition: filter .7s;
    }
    /* Crowd words */
    .crowd-word {
      position: absolute;
      color: #e3e3e380;
      font-family: inherit;
      font-weight: 600;
      opacity: 0.37;
      pointer-events: none;
      z-index: 4;
      user-select: none;
      text-shadow: 0 0 22px #07070c55, 0 0 4px #111;
      filter: blur(1.2px);
      animation: crowdFlicker 2s infinite alternate;
    }
    .crowd-word.red { color: #EF5350; opacity: 0.54; text-shadow: 0 0 13px #EF535080,0 0 2px #b31111cc; filter: blur(1.3px);}
    @keyframes crowdFlicker {
      0% { opacity: 0.12; }
      16% { opacity: 0.32; }
      40% { opacity: 0.37; }
      64% { opacity: 0.16; }
      82% { opacity: 0.4; }
      100% { opacity: 0.08; }
    }
    /* Input box */
    .input-wrap {
      margin-top: 62px;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 6;
      position: relative;
    }
    .nemesis-input {
      width: 470px; min-width: 260px;
      min-height: 84px; max-height: 160px;
      font-size: 1.18rem;
      background: #141920;
      color: #B6C5DF;
      border: 1.5px solid #2A3340;
      outline: none;
      padding: 17px 20px 17px 24px;
      border-radius: 8px;
      font-family: inherit;
      font-weight: 450;
      box-shadow: 0 4px 24px #000a 0px 1px 12px #16203355;
      resize: none;
      line-height: 1.33;
      transition: border .2s;
      caret-color: #EF5350;
      overflow: auto;
    }
    .nemesis-input:focus {
      border: 1.5px solid #EF5350;
      background: #181C22;
    }
    .ghost {
      position: absolute;
      left: 35px; top: 16px; right: 20px; bottom: 16px;
      color: #6F798E;
      opacity: 0.62;
      font-size: 1.06rem;
      font-family: inherit;
      pointer-events: none;
      white-space: pre-line;
      user-select: none;
      z-index: 10;
      transition: opacity .3s;
      line-height: 1.33;
    }
    /* Submit Button */
    .nemesis-submit {
      margin: 22px auto 0 auto;
      display: block;
      font-family: inherit;
      font-size: 1.03rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      background: #2C1112;
      color: #F67C7B;
      border: 1.4px solid #F24141;
      border-radius: 7px;
      padding: 13px 44px 13px 44px;
      cursor: not-allowed;
      filter: grayscale(0.2);
      opacity: 0.64;
      font-weight: 650;
      box-shadow: 0 1.5px 0 #e0343470;
      transition: filter 0.17s, box-shadow 0.21s, background 0.17s, color 0.16s, border 0.14s;
      outline: none;
      user-select: none;
    }
    .nemesis-submit.enabled {
      cursor: pointer;
      filter: none;
      opacity: 1;
      box-shadow: 0 0 10px #f33b3b60, 0 2px 18px #330a0a33;
      background: #3C1718;
    }
    .nemesis-submit.enabled:hover,
    .nemesis-submit.enabled:focus {
      background: #481616;
      box-shadow: 0 0 26px #ef535088, 0 4px 22px #611a1a25;
      border: 1.4px solid #ff4b44;
      color: #FF8484;
      outline: none;
    }
    /* Nemesis Analysis */
    .analysis {
      position: absolute;
      left: 50%;
      top: 58%;
      transform: translate(-50%, -50%);
      z-index: 10;
      text-align: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity .7s;
      width: 610px;
      max-width: 98vw;
    }
    .analysis.visible {
      opacity: 1;
      pointer-events: auto;
    }
    .scan-vuln {
      font-size: 1.18rem;
      color: #EF5350;
      letter-spacing: 0.12em;
      font-family: inherit;
      font-weight: 600;
      text-shadow: 0 0 16px #EF535088;
      animation: scanPulse 1s infinite alternate;
      margin-bottom: 28px;
      user-select: none;
    }
    @keyframes scanPulse {
      0% { opacity: 0.8; }
      50% { opacity: 1; text-shadow: 0 0 28px #EF5350cc; }
      100% { opacity: 0.8; }
    }
    .fragility-box {
      display: inline-block;
      border: 2.5px solid #EF5350;
      background: #201516cc;
      color: #EF5350;
      padding: 15px 48px;
      border-radius: 10px;
      font-family: inherit;
      font-size: 1.55rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      box-shadow: 0 0 38px #EF535044, 0 0 8px #1c1010;
      margin-top: 20px;
      opacity: 0;
      transition: opacity .65s;
      text-align: center;
    }
    .fragility-box.visible {
      opacity: 1;
      transition-delay: .7s;
    }
    /* Next Truth Button */
    .next-truth {
      position: fixed;
      bottom: 32px; right: 44px;
      background: none;
      color: #B5E8FF;
      font-family: inherit;
      font-size: 1.12rem;
      letter-spacing: 0.09em;
      border: 1.7px solid #44BEEF;
      border-radius: 7px;
      padding: 13px 30px 13px 30px;
      text-transform: uppercase;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 2px 12px #0a456766;
      opacity: 0;
      pointer-events: none;
      z-index: 22;
      transition: opacity .34s;
      user-select: none;
      outline: none;
    }
    .next-truth.visible {
      opacity: 1;
      pointer-events: auto;
      animation: icyPulse 1.4s infinite alternate;
    }
    @keyframes icyPulse {
      0% { box-shadow: 0 0 9px #00caf088, 0 2px 14px #172c3a22;}
      100% { box-shadow: 0 0 23px #20a9e088, 0 3px 20px #21465942;}
    }
    .next-truth:hover, .next-truth:focus {
      background: #183042;
      color: #C8F0FF;
      border: 1.7px solid #00C9FE;
      box-shadow: 0 0 38px #00caf099, 0 4px 32px #21465955;
      outline: none;
    }
    /* Mobile block overlay */
    #mobile-block {
      display: none;
      position: fixed; z-index: 9999;
      inset: 0;
      background: #111;
      color: #fff;
      font-size: 1.54rem;
      font-family: inherit;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-weight: 700;
      letter-spacing: 0.03em;
    }
    #mobile-block.visible { display: flex; }
    /* Screenshot Blur Overlay */
    .blur-overlay {
      position: fixed;
      inset: 0;
      z-index: 99;
      background: rgba(17,17,17,0.78);
      backdrop-filter: blur(9px);
      display: none;
      pointer-events: none;
      animation: blurFlash 2s forwards;
    }
    @keyframes blurFlash {
      0% { opacity: 0; }
      8% { opacity: 1; }
      85% { opacity: 1; }
      100% { opacity: 0; }
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <div class="header">
    INITIATION PROTOCOL: PSYCHOLOGICAL FINGERPRINTING
  </div>
  <div class="timer" id="timer">
    SESSION TIMER 00:00 MIN
  </div>
  <!-- MAIN QUESTION -->
  <div class="question">
    What's the worst thing someone could say about you publicly?
  </div>
  <!-- SILHOUETTE -->
  <img src="silhouette.png" class="silhouette" alt="Silhouette" draggable="false" />

  <!-- CROWD WORDS -->
  <span class="crowd-word" id="cw1" style="left:21vw;top:39vh;font-size:2.22rem;">fraud</span>
  <span class="crowd-word red" id="cw2" style="left:52vw;top:27vh;font-size:2.05rem;filter:blur(2.6px);">overrated</span>
  <span class="crowd-word" id="cw3" style="left:34vw;top:51vh;font-size:1.29rem;filter:blur(3.5px);">faker</span>
  <span class="crowd-word" id="cw4" style="left:68vw;top:46vh;font-size:1.84rem;filter:blur(1.7px);">faker</span>
  <span class="crowd-word" id="cw5" style="left:62vw;top:57vh;font-size:1.05rem;">fraud</span>
  <span class="crowd-word" id="cw6" style="left:24vw;top:59vh;font-size:1.18rem;filter:blur(2px);">faker</span>
  <span class="crowd-word" id="cw7" style="left:45vw;top:34vh;font-size:1.07rem;">faker</span>

  <!-- INPUT BOX (with ghost text) -->
  <div class="input-wrap">
    <textarea class="nemesis-input" id="nemesis-input" rows="3" spellcheck="false" autocomplete="off"></textarea>
    <div class="ghost" id="ghost-text">
      He's just a brand, not a builder.<br>Everything he made was hype – no substance
    </div>
  </div>
  <!-- SUBMIT BUTTON -->
  <button class="nemesis-submit" id="nemesis-submit" disabled>SUBMIT TO ADVERSARY</button>

  <!-- NEMESIS ANALYSIS (hidden by default) -->
  <div class="analysis" id="analysis">
    <div class="scan-vuln" id="scan-vuln" style="display:none;">
      Nemesis Analysis: Scanning Vulnerabilities...
    </div>
    <div class="fragility-box" id="fragility-box">
      REPUTATION FRAGILITY
    </div>
  </div>

  <!-- FACE NEXT TRUTH BUTTON -->
  <button class="next-truth" id="next-truth" style="display:none;">FACE NEXT TRUTH</button>

  <!-- MOBILE OVERLAY -->
  <div id="mobile-block">
    Nemesis Protocol only runs on tablets and computers.
  </div>

  <!-- Screenshot Blur Overlay -->
  <div class="blur-overlay" id="blur-overlay"></div>

<script>
/* --- UI Sizing/Blocking for Mobile --- */
function checkMobileBlock() {
  const w = window.innerWidth, h = window.innerHeight;
  if (w < 760 || h < 500) {
    document.getElementById('mobile-block').classList.add('visible');
    document.body.style.overflow = 'hidden';
  } else {
    document.getElementById('mobile-block').classList.remove('visible');
    document.body.style.overflow = '';
  }
}
window.addEventListener('resize', checkMobileBlock);
checkMobileBlock();

/* --- Crowd Word Random Flicker & Flicker Delay --- */
function randomizeCrowdWordFlicker() {
  for (let i = 1; i <= 7; ++i) {
    const word = document.getElementById('cw'+i);
    word.style.animationDuration = (1.5 + Math.random()*2.8) + 's';
    word.style.animationDelay = (Math.random()*3.7) + 's';
    word.style.opacity = (0.25 + Math.random()*0.2);
    word.style.filter = word.style.filter || '';
  }
}
randomizeCrowdWordFlicker();

/* --- Ghost Typing Logic --- */
const input = document.getElementById('nemesis-input');
const ghost = document.getElementById('ghost-text');
let ghostTimeout = null;
const ghostText = "He's just a brand, not a builder.\nEverything he made was hype – no substance";
function showGhostText() {
  ghost.innerHTML = ghostText.replace(/\n/g, '<br>');
  ghost.style.opacity = '1';
}
function hideGhostText() {
  ghost.style.opacity = '0';
}
input.addEventListener('focus', e => { hideGhostText(); });
input.addEventListener('click', e => { hideGhostText(); });
input.addEventListener('input', e => {
  hideGhostText();
  if (ghostTimeout) clearTimeout(ghostTimeout);
  if (!input.value.trim()) {
    ghostTimeout = setTimeout(() => {
      if (!input.value.trim()) showGhostText();
    }, 2000);
  }
  checkInputValidity();
});
input.addEventListener('blur', e => {
  if (!input.value.trim()) showGhostText();
});

/* --- Input Validity for Button --- */
const submitBtn = document.getElementById('nemesis-submit');
function checkInputValidity() {
  // 2+ non-empty lines
  const lines = input.value.split('\n').filter(line => line.trim().length > 0);
  if (lines.length >= 2) {
    submitBtn.classList.add('enabled');
    submitBtn.disabled = false;
    submitBtn.style.cursor = 'pointer';
  } else {
    submitBtn.classList.remove('enabled');
    submitBtn.disabled = true;
    submitBtn.style.cursor = 'not-allowed';
  }
}
checkInputValidity();

/* --- Session Timer --- */
let timerElem = document.getElementById('timer');
let t_seconds = 0, timerRunning = true, analysisMode = false;
function updateTimer() {
  if (timerRunning && !analysisMode) {
    t_seconds++;
    if (t_seconds > 420) t_seconds = 420; // never show >07:00
  }
  let mins = Math.floor(t_seconds/60);
  let secs = t_seconds%60;
  timerElem.textContent = `SESSION TIMER ${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')} MIN`;
}
setInterval(updateTimer, 1000);

/* --- Submit Button Click / Analysis Animation --- */
const analysis = document.getElementById('analysis');
const scanVuln = document.getElementById('scan-vuln');
const fragility = document.getElementById('fragility-box');
const nextTruth = document.getElementById('next-truth');
submitBtn.addEventListener('click', async e => {
  if (!submitBtn.classList.contains('enabled')) return;
  analysisMode = true;
  input.disabled = true;
  submitBtn.disabled = true;
  submitBtn.style.opacity = '0'; // fade out
  input.style.opacity = '0';
  setTimeout(()=>{ input.style.display='none'; submitBtn.style.display='none'; }, 350);
  // After a random delay, show scanning...
  const scanDelay = 4000 + Math.random() * 8000;
  setTimeout(() => {
    analysis.classList.add('visible');
    scanVuln.style.display = '';
    fragility.classList.remove('visible');
    // After 1s, show fragility
    setTimeout(() => {
      scanVuln.style.display = 'none';
      fragility.classList.add('visible');
      // show next-truth button after .7s
      setTimeout(() => {
        nextTruth.style.display = '';
        nextTruth.classList.add('visible');
        analysisMode = false;
      }, 700);
    }, 1000);
  }, scanDelay);
});

/* --- Next Truth Button Logic --- */
nextTruth.addEventListener('click', e => {
  window.location.href = 'page3.html';
});

/* --- Clipboard/Right-click/Screenshot/Session Restrictions --- */
function blockEvent(e) { e.preventDefault(); return false; }
['copy','cut','paste','contextmenu','dragstart','drop'].forEach(ev => {
  document.addEventListener(ev, blockEvent);
});
window.addEventListener('keydown', e => {
  // Block PrintScreen
  if (e.key === "PrintScreen") {
    const blur = document.getElementById('blur-overlay');
    blur.style.display = 'block';
    setTimeout(() => { blur.style.display = 'none'; }, 2000);
    e.preventDefault();
    return false;
  }
  // Block Ctrl+C/V/X
  if ((e.ctrlKey || e.metaKey) && ['c','v','x','C','V','X'].includes(e.key)) blockEvent(e);
  // Block F5, Ctrl+R, Cmd+R, Backspace (if not typing), Alt+Left/Right
  if ((e.key === 'F5') || ((e.ctrlKey || e.metaKey) && (e.key.toLowerCase() === 'r'))) {
    alert("You cannot reload or refresh during this protocol.");
    e.preventDefault(); return false;
  }
  if ((e.key === 'Backspace' && document.activeElement !== input) || (e.altKey && (e.key === 'ArrowLeft' || e.key === 'ArrowRight'))) {
    alert("Navigation is blocked during this protocol.");
    e.preventDefault(); return false;
  }
  // Block Alt+Left/Right navigation
  if (e.altKey && (e.key === "ArrowLeft" || e.key === "ArrowRight")) {
    alert("Navigation is blocked during this protocol."); e.preventDefault();
  }
});
window.addEventListener('beforeunload', function (e) {
  e.preventDefault();
  e.returnValue = '';
});
window.addEventListener('popstate', function(e){
  alert('Navigation is blocked during this protocol.');
  history.pushState(null, null, location.href);
});
history.pushState(null, null, location.href); // lock in

// No session persistence
if (window.localStorage) localStorage.clear();
if (window.sessionStorage) sessionStorage.clear();

/* --- On Page Load: Place ghost text and check validity --- */
window.onload = () => {
  showGhostText();
  checkInputValidity();
  setTimeout(() => input.blur(), 200);
};
</script>
</body>
</html>
