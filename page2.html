<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Project Nemesis – Psychological Fingerprinting</title>
  <meta name="viewport" content="width=1024">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@600&family=IBM+Plex+Mono:wght@600&display=swap" rel="stylesheet">
  <style>
    :root {
      --black: #0c0f13;
      --accent-red: #ff2323;
      --alert-blue: #7cd1ff;
      --white: #f3f3f3;
      --input-glass-bg: rgba(24, 29, 38, 0.4);
      --input-glass-brd: rgba(124,209,255,0.12);
      --bubble-fg: #f3f3f3ee;
      --bubble-red: #ff4e4e;
      --bubble-white: #e5e7ebcc;
    }

    html, body {
      width: 100vw; height: 100vh; min-width: 1024px;
      margin: 0; padding: 0;
      background: var(--black);
      overflow: hidden;
      font-family: 'JetBrains Mono', 'IBM Plex Mono', 'monospace';
      letter-spacing: 0.01em;
      position: relative;
      user-select: none;
    }
    /* Background neural grid + scanlines */
    body::before, body::after {
      content: "";
      pointer-events: none;
      position: absolute; left: 0; top: 0; width: 100vw; height: 100vh; z-index: 0;
    }
    body::before {
      background: 
        repeating-linear-gradient(0deg, rgba(70,90,120,0.03) 0 2px, transparent 2px 8px),
        repeating-linear-gradient(90deg, rgba(124,209,255,0.04) 0 1px, transparent 1px 24px),
        url('data:image/svg+xml;utf8,<svg width="700" height="700" viewBox="0 0 700 700" xmlns="http://www.w3.org/2000/svg"><g fill="none" stroke="rgba(60,80,120,0.14)" stroke-width="1"><rect x="20" y="20" width="660" height="660" rx="88"/><rect x="160" y="160" width="380" height="380" rx="48"/></g></svg>') center/cover no-repeat;
      opacity: 0.7;
    }
    body::after {
      background: repeating-linear-gradient(0deg,rgba(30,40,70,0.1) 0 1px,transparent 1px 5px);
      opacity: 0.28;
      mix-blend-mode: screen;
    }
    /* Silhouette Centerpiece */
    #silhouette-wrap {
      position: absolute; z-index: 1;
      left: 50%; top: 52%; transform: translate(-50%, -50%);
      width: 460px; height: 680px;
      pointer-events: none;
      filter: drop-shadow(0 0 88px #293040cc) blur(0.5px);
    }
    #silhouette-img {
      width: 100%; height: 100%;
      opacity: 0.74;
      mix-blend-mode: lighten;
      object-fit: contain;
      background: radial-gradient(ellipse at 50% 80%, #7cd1ff11 70%, transparent 100%);
      border-radius: 160px;
    }
    /* Header + Timer */
    #header-row {
      position: absolute; z-index: 2;
      top: 38px; left: 70px; right: 70px;
      display: flex; justify-content: space-between; align-items: flex-start;
    }
    #nemesis-header {
      font-size: 1.48rem;
      font-family: 'IBM Plex Mono', 'JetBrains Mono', monospace;
      letter-spacing: 0.14em;
      font-weight: 700;
      color: var(--alert-blue);
      text-shadow: 0 0 8px #05242b66, 0 0 1.5px var(--alert-blue);
      line-height: 2rem;
      text-transform: uppercase;
      user-select: none;
    }
    #session-timer {
      font-family: 'JetBrains Mono', 'IBM Plex Mono', monospace;
      font-size: 1.12rem;
      color: #ff3636;
      letter-spacing: 0.12em;
      text-shadow: 0 0 8px #20131366;
      font-variant-numeric: tabular-nums;
      padding-top: 2px;
      user-select: none;
      font-weight: 700;
    }
    /* Question */
    #main-question {
      position: absolute;
      z-index: 2;
      top: 124px; left: 0; right: 0;
      width: 100vw;
      font-size: 2.2rem;
      font-family: inherit;
      color: #fafcff;
      text-align: center;
      text-shadow: 0 0 8px #41b7e866, 0 0 1.5px #e7f6ffcc;
      font-weight: 700;
      letter-spacing: 0.03em;
      filter: drop-shadow(0 1px 4px #01182488);
      user-select: none;
      pointer-events: none;
    }
    /* Flickering Right-side Bubbles */
    .bubble-word {
      position: absolute; z-index: 3;
      right: 160px;
      opacity: 0; /* animated in/out */
      font-family: inherit;
      font-size: 1.6rem;
      font-weight: 700;
      pointer-events: none;
      text-shadow: 0 0 8px #000, 0 0 1.5px #fff5;
      animation: bubble-flicker 6s linear infinite;
      filter: blur(0.3px);
      will-change: opacity, transform;
    }
    .bubble-word.fraud    { color: var(--bubble-white);  top: 300px; animation-delay: 0.6s;}
    .bubble-word.faker    { color: var(--bubble-white);  top: 400px; animation-delay: 1.6s;}
    .bubble-word.faker2   { color: var(--bubble-white);  top: 480px; animation-delay: 2.4s;}
    .bubble-word.overrated{ color: var(--bubble-red);    top: 350px; animation-delay: 3.2s;}
    @keyframes bubble-flicker {
      0%, 8%    { opacity: 0; }
      10%,32%   { opacity: 0.85; }
      34%,44%   { opacity: 0.08;}
      46%, 66%  { opacity: 0.85;}
      68%,100%  { opacity: 0; }
    }
    /* Ghost Input Box */
    #ghost-input-wrap {
      position: absolute; z-index: 5;
      top: 250px; left: 0; width: 100vw; display: flex; justify-content: center;
      user-select: none;
      transition: filter 0.15s;
    }
    #ghost-input-box {
      font-family: inherit;
      font-size: 1.21rem;
      width: 540px;
      min-height: 84px;
      background: var(--input-glass-bg);
      border: 1.7px solid var(--input-glass-brd);
      border-radius: 15px;
      box-shadow: 0 2px 12px #09243233, 0 0 0 3px #7cd1ff11;
      color: var(--white);
      padding: 30px 32px 28px 28px;
      margin: 0 auto;
      outline: none;
      resize: none;
      letter-spacing: 0.015em;
      caret-color: var(--alert-blue);
      filter: drop-shadow(0 2px 18px #0d1a2a20);
      transition: border-color 0.15s, box-shadow 0.15s, background 0.2s, color 0.16s;
      backdrop-filter: blur(5.5px) saturate(1.2);
      animation: glassIn 0.8s;
    }
    @keyframes glassIn { from { opacity: 0; transform: translateY(-48px) scale(0.96);} to{ opacity:1;transform:none;} }
    #ghost-input-box:focus {
      border-color: var(--alert-blue);
      box-shadow: 0 2px 24px #7cd1ff44, 0 0 0 4px #2e486922;
      background: rgba(28, 38, 51, 0.56);
    }
    /* Ghost typing effect */
    #ghost-cursor {
      display: inline-block;
      width: 10px;
      color: var(--alert-blue);
      background: transparent;
      font-weight: 900;
      animation: blink 1s step-end infinite;
    }
    @keyframes blink { 0%,100%{opacity:1;} 60%{opacity:0;} }
    /* Submit Button */
    #submit-btn, #next-btn {
      display: block;
      margin: 44px auto 0 auto;
      padding: 20px 48px;
      font-family: inherit;
      font-size: 1.11rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      border-radius: 13px;
      border: none;
      outline: none;
      cursor: pointer;
      box-shadow: 0 2px 22px #2e232e16;
      user-select: none;
      transition: filter 0.18s, box-shadow 0.16s, border-color 0.16s, color 0.13s;
      filter: brightness(1.1);
    }
    #submit-btn {
      background: transparent;
      color: var(--accent-red);
      border: 2.3px solid var(--accent-red);
      box-shadow: 0 0 0 2px #ff232322, 0 0 0 0 #000;
      text-shadow: 0 0 8px #24040466;
      filter: drop-shadow(0 0 6px #ff232338);
      position: relative; z-index: 5;
      margin-top: 42px;
    }
    #submit-btn:hover:not(:disabled),
    #submit-btn:focus:not(:disabled) {
      filter: brightness(1.3) drop-shadow(0 0 10px #ff2c2c66);
      box-shadow: 0 0 10px #ff232346, 0 0 8px #ff23231f;
      animation: btnShiver 0.18s linear 2;
    }
    @keyframes btnShiver {
      0% { transform: translateX(0px);}
      26% { transform: translateX(-2px);}
      46% { transform: translateX(3px);}
      66% { transform: translateX(-2px);}
      100%{ transform: translateX(0px);}
    }
    #submit-btn:disabled {
      opacity: 0.32; cursor: not-allowed; filter: grayscale(0.5) brightness(0.9);
      box-shadow: none;
    }
    /* Analysis Overlay */
    #analysis-overlay {
      display: none;
      position: fixed; left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(18,16,22,0.84);
      z-index: 100;
      backdrop-filter: blur(5px) saturate(1.04);
      animation: fadeIn 0.44s;
    }
    @keyframes fadeIn { from{opacity:0;}to{opacity:1;} }
    #analysis-center {
      position: absolute; left: 50%; bottom: 90px; transform: translateX(-50%);
      display: flex; flex-direction: column; align-items: center;
      width: 520px; max-width: 92vw;
    }
    #nemesis-analyzing {
      color: var(--accent-red);
      font-size: 1.32rem;
      font-family: inherit;
      letter-spacing: 0.04em;
      text-align: center;
      font-weight: 700;
      margin-bottom: 56px;
      animation: scanPulse 1.3s infinite alternate;
      text-shadow: 0 0 14px #ff232366, 0 1px 2px #000;
    }
    @keyframes scanPulse { 0%{filter:brightness(0.9);} 100%{filter:brightness(1.3);} }
    /* Data vortex animation */
    #vortex-loader {
      width: 68px; height: 68px;
      margin: 0 auto 32px auto;
      display: block;
      position: relative;
      z-index: 101;
      pointer-events: none;
    }
    .vortex-ring {
      position: absolute; left: 50%; top: 50%;
      width: 100%; height: 100%;
      border-radius: 50%;
      border: 3px solid #1cc6fd38;
      border-top-color: #ff232333;
      transform: translate(-50%,-50%);
      animation: spinVortex 1.4s linear infinite;
    }
    .vortex-ring.r2 {width:54px;height:54px;opacity:0.45;animation-delay:.4s;}
    .vortex-ring.r3 {width:38px;height:38px;opacity:0.25;animation-delay:.7s;}
    @keyframes spinVortex { to{transform:translate(-50%,-50%) rotate(360deg);} }
    /* Vulnerability Reveal */
    #vulnerability-reveal {
      display: none;
      margin-top: 22px;
      padding: 38px 28px 30px 32px;
      background: rgba(43,17,18,0.86);
      border: 2.7px solid var(--accent-red);
      border-radius: 19px;
      box-shadow: 0 0 34px #ff232366;
      color: var(--accent-red);
      font-family: inherit;
      font-size: 2.1rem;
      letter-spacing: 0.14em;
      font-weight: 900;
      text-align: center;
      text-shadow: 0 0 20px #ff232382, 0 2px 2px #18060b92;
      position: relative;
      overflow: visible;
      animation: revealPulse 0.7s;
    }
    @keyframes revealPulse { 
      from { opacity: 0; transform: scale(0.98) translateY(64px);}
      to   { opacity: 1; transform: none;}
    }
    /* Crack animation */
    #crack-anim {
      display: block;
      margin: 0 auto;
      width: 106px; height: 19px;
      background: none;
      border: none;
      outline: none;
      margin-top: 11px;
      opacity: 0.91;
      pointer-events: none;
      animation: crackPulse 1.5s ease-in-out infinite alternate;
    }
    @keyframes crackPulse { 0%{filter:brightness(0.9);}100%{filter:brightness(1.21);} }
    /* Next Button */
    #next-btn {
      margin-top: 49px;
      background: transparent;
      color: var(--alert-blue);
      border: 2.3px solid var(--alert-blue);
      text-shadow: 0 0 8px #05242b66;
      filter: drop-shadow(0 0 7px #7cd1ff55);
    }
    #next-btn:hover,
    #next-btn:focus {
      filter: brightness(1.3) drop-shadow(0 0 13px #7cd1ffcc);
      box-shadow: 0 0 12px #7cd1ff66;
      animation: btnShiver 0.18s linear 2;
    }
    /* Input & button cursor */
    #ghost-input-box, #submit-btn, #next-btn {
      cursor: url('data:image/svg+xml;utf8,<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><rect fill="red" x="11" y="2" width="2" height="20" rx="1.2"/></svg>'), auto;
    }
    /* Mobile lockout modal */
    #modal-mobile {
      display: none;
      position: fixed; left: 0; top: 0; width: 100vw; height: 100vh;
      background: #0a0d10ed;
      color: #fff;
      z-index: 20000;
      font-family: inherit;
      font-size: 2.3rem;
      align-items: center; justify-content: center;
      text-align: center;
      animation: fadeIn 0.4s;
      user-select: none;
    }
    /* Screenshot/clipboard/context lock modal */
    #modal-block {
      display: none;
      position: fixed; left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(16,13,22,0.97);
      color: #ff2323;
      z-index: 30000;
      font-family: inherit;
      font-size: 1.6rem;
      align-items: center; justify-content: center;
      text-align: center;
      animation: fadeIn 0.26s;
      user-select: none;
      padding: 0 32px;
    }
    /* Prevent selection on UI */
    *::selection { background: #ff23238b; color: #fff;}
    /* Hide scroll */
    ::-webkit-scrollbar{ display:none;}
    body { -ms-overflow-style: none; scrollbar-width: none;}
  </style>
</head>
<body>
  <!-- Scanline overlay and neural-circuit are handled in body::before and ::after -->

  <!-- Silhouette Centerpiece -->
  <div id="silhouette-wrap">
    <img id="silhouette-img" src="silhouette.png" alt="Silhouette">
  </div>

  <!-- Flickering word bubbles (right side only) -->
  <span class="bubble-word fraud">fraud</span>
  <span class="bubble-word overrated">overrated</span>
  <span class="bubble-word faker">faker</span>
  <span class="bubble-word faker2">faker</span>

  <!-- Header row -->
  <div id="header-row">
    <span id="nemesis-header">INITIATION PROTOCOL:  PSYCHOLOGICAL FINGERPRINTING</span>
    <span id="session-timer">SESSION TIMER:<span id="timer-val">07:00</span> MIN</span>
  </div>

  <!-- Main question -->
  <div id="main-question">
    What’s the worst thing someone could say about you publicly?
  </div>

  <!-- Ghost input box (glass style) -->
  <div id="ghost-input-wrap">
    <textarea id="ghost-input-box" spellcheck="false" rows="3" maxlength="256" autocomplete="off" autocorrect="off" autofocus></textarea>
  </div>

  <!-- Submit button -->
  <button id="submit-btn">SUBMIT TO ADVERSARY</button>

  <!-- Analysis overlay + vortex + vulnerability reveal -->
  <div id="analysis-overlay">
    <div id="analysis-center">
      <div id="nemesis-analyzing">Nemesis Analysis: Scanning Vulnerabilities...</div>
      <div id="vortex-loader">
        <div class="vortex-ring"></div>
        <div class="vortex-ring r2"></div>
        <div class="vortex-ring r3"></div>
      </div>
      <div id="vulnerability-reveal">
        REPUTATION FRAGILITY
        <svg id="crack-anim" viewBox="0 0 100 18">
          <polyline points="0,12 12,8 18,17 26,9 36,13 48,6 56,14 62,8 73,16 80,6 100,12" stroke="#ff2323" stroke-width="2.5" fill="none"/>
        </svg>
      </div>
      <button id="next-btn" style="display:none;">FACE NEXT TRUTH</button>
    </div>
  </div>

  <!-- Mobile device modal -->
  <div id="modal-mobile">
    <span>This simulation can only be run on tablets or desktops for security reasons.</span>
  </div>
  <!-- Screenshot/clipboard/context menu modal -->
  <div id="modal-block"></div>

  <script>
    // Theme colors
    const ghostText = "He's just a brand, not a builder.\nEverything he made was hype – no substance.";
    let ghostTimer = null, typing = false, timerInterval = null;
    let timerSeconds = 420; // 7:00 min

    // Responsive: Block mobile devices
    function checkMobile() {
      if (window.innerWidth < 700) {
        document.getElementById('modal-mobile').style.display = 'flex';
        document.body.style.overflow = 'hidden';
      } else {
        document.getElementById('modal-mobile').style.display = 'none';
        document.body.style.overflow = '';
      }
    }
    window.addEventListener('resize', checkMobile);
    checkMobile();

    // Timer logic
    function updateTimer() {
      let m = Math.floor(timerSeconds/60), s = timerSeconds%60;
      document.getElementById('timer-val').textContent = 
        String(m).padStart(2,'0')+':'+String(s).padStart(2,'0');
    }
    function startTimer() {
      updateTimer();
      timerInterval = setInterval(() => {
        if (timerSeconds > 0) timerSeconds--;
        updateTimer();
      }, 1000);
    }
    startTimer();
    function pauseTimer() { clearInterval(timerInterval);}
    function resumeTimer() { startTimer();}

    // Ghost typing logic
    const inputBox = document.getElementById('ghost-input-box');
    function setGhostText(instant) {
      inputBox.value = "";
      let i = 0;
      typing = true;
      function ghostType() {
        if (i < ghostText.length) {
          inputBox.value += ghostText[i++];
          if (ghostText[i-1] === "\n") inputBox.value += '';
          setTimeout(ghostType, instant ? 0 : 36 + Math.random()*24);
        } else {
          typing = false;
        }
      }
      ghostType();
    }
    setGhostText(false);

    // When focus/click, clear instantly
    inputBox.addEventListener('focus', e=>{
      if (!typing && inputBox.value === ghostText) inputBox.value="";
      clearTimeout(ghostTimer);
    });
    inputBox.addEventListener('click', e=>{
      if (!typing && inputBox.value === ghostText) inputBox.value="";
      clearTimeout(ghostTimer);
    });
    // If empty, restore ghost after unfocus/wait 3s
    inputBox.addEventListener('blur', ()=>{
      if (inputBox.value.trim().length === 0 && !typing) {
        ghostTimer = setTimeout(()=>setGhostText(false), 2400);
      }
    });
    inputBox.addEventListener('input', ()=>{
      if (ghostTimer) clearTimeout(ghostTimer);
      // If deleted all, restore ghost after 3s idle
      if (inputBox.value.trim().length===0 && !typing) {
        ghostTimer = setTimeout(()=>setGhostText(false), 2400);
      }
    });

    // Prevent clipboard/copy/paste/context menu
    document.addEventListener('copy', e=>{ e.preventDefault(); showBlockModal('Copy not allowed.'); });
    document.addEventListener('cut', e=>{ e.preventDefault(); showBlockModal('Cut not allowed.'); });
    document.addEventListener('paste', e=>{ e.preventDefault(); showBlockModal('Paste not allowed.'); });
    document.addEventListener('contextmenu', e=>{ e.preventDefault(); showBlockModal('Right-click not allowed.'); });

    // Prevent back/forward navigation
    history.pushState(null, null, location.href);
    window.onpopstate = function() {
      history.go(1); showBlockModal("Navigation is locked during this simulation.");
    };

    // Prevent refresh saving
    window.onbeforeunload = function() {
      return "All progress will be lost. Are you sure you want to leave?";
    };

    // Attempt screenshot block (not 100% foolproof)
    document.addEventListener('keydown', function(e) {
      // PrtScn, Cmd+Shift+4, Snipping Tool keys
      if (
        e.key === "PrintScreen" ||
        (e.metaKey && e.shiftKey && (e.key === "4" || e.key === "3")) ||
        (e.ctrlKey && e.key.toLowerCase()==='s')
      ) {
        e.preventDefault(); showBlockModal("Screenshotting is not permitted during this simulation.");
      }
    });

    // Show/hide block modal
    function showBlockModal(txt) {
      let m = document.getElementById('modal-block');
      m.textContent = txt;
      m.style.display = 'flex';
      setTimeout(()=>{ m.style.display = 'none'; }, 2600);
    }

    // Submit button logic
    const submitBtn = document.getElementById('submit-btn');
    const overlay = document.getElementById('analysis-overlay');
    const nextBtn = document.getElementById('next-btn');
    submitBtn.onclick = function() {
      if (inputBox.value.trim().length === 0 || typing) {
        inputBox.focus(); return;
      }
      // Lock input & button, show overlay & analysis
      inputBox.disabled = true; submitBtn.disabled = true;
      overlay.style.display = 'block';
      document.body.style.overflow = 'hidden';
      pauseTimer();

      // Vortex animation, then reveal
      setTimeout(() => {
        document.getElementById('nemesis-analyzing').style.display = 'none';
        document.getElementById('vortex-loader').style.display = 'none';
        const vuln = document.getElementById('vulnerability-reveal');
        vuln.style.display = 'block';
        nextBtn.style.display = 'block';
      }, 4000 + Math.random()*8000); // 4-12 seconds
    };
    // Next button goes to page3.html
    nextBtn.onclick = function() {
      window.location.href = "page3.html";
    };

    // Input field & button shiver on hover
    inputBox.addEventListener('mouseover', ()=>{inputBox.style.animation='btnShiver 0.14s';});
    inputBox.addEventListener('animationend', ()=>{inputBox.style.animation='';});

    // Prevent clipboard via keyboard
    inputBox.addEventListener('keydown', function(e){
      if ((e.ctrlKey || e.metaKey) && (e.key==='v' || e.key==='c' || e.key==='x')) {
        e.preventDefault(); showBlockModal('Clipboard operations not allowed.');
      }
    });

    // Prevent context menu on silhouette
    document.getElementById('silhouette-img').addEventListener('contextmenu',e=>e.preventDefault());
  </script>
</body>
</html>
