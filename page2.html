<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Project Nemesis: Initiation Protocol â€” Psychological Fingerprinting</title>
  <meta name="viewport" content="width=1024, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="icon" href="silhouette.png" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #0e1012 0%, #16181a 100%);
      color: #e9f4ff;
      font-family: 'JetBrains Mono', monospace;
      overflow: hidden;
      user-select: none;
    }

    body.blocked {
      pointer-events: none;
      filter: grayscale(1) blur(1.5px) brightness(0.7);
    }

    /* Glitch/Static overlay effect */
    #glitch {
      pointer-events: none;
      position: fixed;
      z-index: 2;
      left: 0; top: 0; width: 100vw; height: 100vh;
      opacity: 0.08;
      background: url('data:image/svg+xml;utf8,<svg width="200" height="200" xmlns="http://www.w3.org/2000/svg"><rect x="0" y="0" width="200" height="200" fill="black"/><g><rect x="0" y="0" width="40" height="10" fill="white" opacity="0.03"/><rect x="60" y="40" width="60" height="12" fill="white" opacity="0.06"/><rect x="120" y="100" width="80" height="7" fill="white" opacity="0.06"/><rect x="10" y="120" width="180" height="4" fill="white" opacity="0.07"/><rect x="30" y="170" width="40" height="20" fill="white" opacity="0.03"/></g></svg>');
      animation: staticShift 1.5s infinite linear;
      background-size: 200px 200px;
    }
    @keyframes staticShift {
      0% { background-position: 0 0;}
      25% { background-position: 50px 100px;}
      50% { background-position: 120px 60px;}
      75% { background-position: 80px 180px;}
      100% { background-position: 0 0;}
    }

    /* Ghostly corner glyphs */
    .glyph {
      position: absolute;
      font-size: 3.2em;
      opacity: 0.06;
      pointer-events: none;
      animation: drift 13s infinite alternate ease-in-out;
    }
    .glyph.g1 { left: 3vw; top: 2vh; transform: rotate(-15deg);}
    .glyph.g2 { right: 5vw; top: 5vh; animation-delay: 2s;}
    .glyph.g3 { left: 2vw; bottom: 3vh; animation-delay: 6s;}
    .glyph.g4 { right: 4vw; bottom: 1vh; transform: rotate(12deg); animation-delay: 11s;}
    @keyframes drift {
      0% { filter: blur(0.5px);}
      100% { transform: translateY(-18px) scale(1.02) rotate(4deg);}
    }

    /* Main layout */
    .main-container {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      z-index: 3;
    }

    .nemesis-header {
      font-size: 1.5em;
      letter-spacing: 0.02em;
      text-align: center;
      margin-bottom: 36px;
      color: #70c2ff;
      font-weight: 700;
      text-shadow: 0 0 8px #00ffee88, 0 0 2px #ffffff55;
      animation: headerGlow 2.2s infinite alternate;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
    }
    @keyframes headerGlow {
      0% { text-shadow: 0 0 6px #00ffee66, 0 0 2px #fff; }
      100% { text-shadow: 0 0 18px #7dfaffee, 0 0 8px #00ffeeee; }
    }

    .silhouette-box {
      position: relative;
      margin-bottom: 30px;
    }

    .silhouette-img {
      display: block;
      width: 320px;
      max-width: 58vw;
      margin: 0 auto;
      filter: drop-shadow(0 0 35px #89f7ff66) blur(0.5px);
      border-radius: 16px;
      background: linear-gradient(120deg, #21223988 0%, #232c4180 100%);
      box-shadow: 0 0 48px 0 #6d4eff66, 0 0 24px 0 #00f0ff44;
      z-index: 3;
    }

    /* Animated speech bubbles */
    .bubble {
      position: absolute;
      color: #c5d7fa;
      background: rgba(28,31,40,0.98);
      border: 1.5px solid #636c7b70;
      box-shadow: 0 1px 10px #37379944, 0 0 0px #b8f6ff33;
      border-radius: 18px 18px 18px 5px;
      padding: 8px 18px;
      font-size: 0.98em;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.7s, transform 0.5s;
      z-index: 4;
      filter: blur(0.3px);
      font-family: inherit;
      animation: bubbleFade 7s linear infinite;
    }
    @keyframes bubbleFade {
      0%   { opacity: 0; }
      5%   { opacity: 0.8; }
      10%  { opacity: 1; }
      80%  { opacity: 1; }
      95%  { opacity: 0.8;}
      100% { opacity: 0; }
    }

    /* Input area */
    .nemesis-input-section {
      width: 390px;
      max-width: 92vw;
      margin: 0 auto;
      background: rgba(22,26,28,0.8);
      border-radius: 17px;
      box-shadow: 0 0 12px #00faff2c, 0 2px 14px #39268d2a;
      padding: 28px 28px 22px 28px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .ghost-textarea {
      width: 100%;
      height: 94px;
      resize: none;
      font-family: inherit;
      font-size: 1.12em;
      color: #bfe8f6;
      background: linear-gradient(96deg,#16181a 90%, #27283d 100%);
      border: 2.4px solid #394e678f;
      border-radius: 12px;
      padding: 13px 18px;
      outline: none;
      box-shadow: 0 0 10px 1.5px #00ffee29;
      margin-bottom: 18px;
      transition: border 0.2s, box-shadow 0.22s;
      caret-color: #7dfaff;
      position: relative;
      letter-spacing: 0.03em;
      filter: blur(0) brightness(1.04);
    }
    .ghost-textarea.pulse {
      border: 2.7px solid #70c2ffcc;
      box-shadow: 0 0 18px #00ffeec7, 0 0 3px #32b6e3a7;
      animation: textareaPulse 0.22s;
    }
    @keyframes textareaPulse {
      0% { box-shadow: 0 0 5px #00ffee99;}
      100% { box-shadow: 0 0 18px #00ffeec7;}
    }
    .ghost-overlay {
      pointer-events: none;
      color: #6fa3d9c2;
      position: absolute;
      left: 32px; top: 38px;
      z-index: 2;
      width: 85%;
      font-size: 1em;
      opacity: 0.78;
      transition: opacity 0.34s;
      font-family: inherit;
      letter-spacing: 0.03em;
      user-select: none;
    }

    /* Button Styles */
    .nemesis-btn {
      font-family: inherit;
      font-weight: 700;
      font-size: 1.13em;
      padding: 12px 30px;
      border-radius: 13px;
      border: none;
      color: #1d1e25;
      background: linear-gradient(90deg,#67ffec 5%,#73a6f7 98%);
      box-shadow: 0 0 18px #00ffee66, 0 2px 8px #011a2240;
      margin-top: 7px;
      letter-spacing: 0.06em;
      cursor: pointer;
      transition: filter 0.18s, box-shadow 0.16s, background 0.24s;
      text-shadow: 0 1px 10px #00ffee17;
      outline: none;
    }
    .nemesis-btn:active {
      filter: brightness(1.03) saturate(1.12);
      box-shadow: 0 0 24px #00ffeecc;
    }
    .nemesis-btn[disabled] {
      background: #404353 !important;
      color: #aaa !important;
      cursor: not-allowed;
      opacity: 0.6;
      box-shadow: none;
    }

    /* Timer top right */
    .nemesis-timer {
      position: fixed;
      top: 30px;
      right: 42px;
      background: #16181aef;
      border-radius: 13px;
      padding: 10px 18px;
      font-size: 1.13em;
      color: #d9edff;
      letter-spacing: 0.04em;
      box-shadow: 0 0 12px #2ce5ff44, 0 1px 5px #3a224d2f;
      z-index: 10;
      font-family: inherit;
      border: 1.4px solid #32b6e3b0;
      font-weight: 600;
    }
    .nemesis-timer.paused {
      color: #a1b6ca;
      background: #202228f7;
      border-color: #2d2d33b6;
      opacity: 0.7;
      animation: timerPulse 0.6s alternate infinite;
    }
    @keyframes timerPulse {
      0% { filter: brightness(1.1);}
      100% { filter: brightness(0.86);}
    }

    /* Loader overlay */
    .nemesis-loader {
      position: fixed;
      z-index: 12;
      left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(18,22,28,0.98);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      transition: opacity 0.44s;
    }
    .loader-spinner {
      width: 54px; height: 54px;
      border: 6px solid #212b42;
      border-top: 6px solid #00ffeecc;
      border-radius: 50%;
      animation: spin 1.1s linear infinite;
      margin-bottom: 24px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg);}
      100% { transform: rotate(360deg);}
    }
    .loader-text {
      font-size: 1.23em;
      color: #c6f8f9;
      text-shadow: 0 0 12px #00ffee66;
      letter-spacing: 0.03em;
      font-family: inherit;
      margin-bottom: 7px;
      text-align: center;
      opacity: 0.88;
    }

    /* Vulnerability annotation */
    .vuln-reveal {
      position: fixed;
      bottom: 32px; right: 52px;
      background: #282c39d8;
      color: #f6f7fe;
      font-size: 1.12em;
      border-radius: 12px 24px 14px 6px;
      padding: 17px 25px;
      box-shadow: 0 0 18px #8fc3ff4d;
      z-index: 20;
      letter-spacing: 0.05em;
      opacity: 0;
      animation: vulnFade 1.3s 0.2s forwards, glitchText 1.2s 2.1s infinite alternate;
      font-weight: 700;
      border: 1.7px solid #6d97d9d9;
      text-shadow: 0 2px 8px #68ffe633;
      filter: blur(0.4px);
    }
    @keyframes vulnFade {
      from { opacity: 0; transform: scale(0.96);}
      to { opacity: 1; transform: scale(1);}
    }
    @keyframes glitchText {
      0% { text-shadow: 0 0 2px #70c2ff, 0 0 0 #00ffee;}
      60% { text-shadow: 1.5px 0 #00ffee88, -2px 2px #ca81fc55;}
      100% { text-shadow: -2px 2px #70c2ff, 2px 1px #efc3ff44;}
    }

    .next-btn {
      position: fixed;
      right: 60px;
      bottom: 24px;
      opacity: 0;
      pointer-events: none;
      z-index: 22;
      animation: fadeInNext 1.5s 1.4s forwards;
      background: linear-gradient(90deg,#8afeff 5%,#5b91f3 98%);
    }
    @keyframes fadeInNext {
      from { opacity: 0;}
      to { opacity: 1; pointer-events: all;}
    }

    /* Blocked overlay for mobile */
    .block-mobile-overlay {
      position: fixed;
      inset: 0;
      background: #0e1012ee;
      color: #fff;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      font-family: inherit;
      font-size: 1.28em;
      letter-spacing: 0.05em;
      text-align: center;
      padding: 32px;
    }
    .block-mobile-overlay strong {
      color: #00ffee;
      font-size: 1.1em;
      display: block;
      margin: 12px 0;
    }
    .warning {
      color: #ff3355;
      font-size: 0.96em;
      margin-top: 8px;
    }

    /* Hide scroll */
    ::-webkit-scrollbar { width: 0 !important; }
    body { -ms-overflow-style: none; scrollbar-width: none;}
  </style>
</head>
<body>
  <div id="glitch"></div>
  <div class="glyph g1">&#9883;</div>
  <div class="glyph g2">&#9762;</div>
  <div class="glyph g3">&#9775;</div>
  <div class="glyph g4">&#9906;</div>

  <!-- Timer -->
  <div class="nemesis-timer" id="nemesis-timer">07:00</div>

  <div class="main-container" id="main-container">
    <div class="nemesis-header">
      ðŸ§  Question 1: Whatâ€™s the worst thing someone could say about you publicly?
    </div>
    <div class="silhouette-box">
      <img src="silhouette.png" alt="Silhouette" class="silhouette-img" id="silhouette-img">
      <!-- Speech bubbles -->
      <div class="bubble" style="top:20px;left:-90px;">fraud</div>
      <div class="bubble" style="top:0px;right:-120px;">wannabe</div>
      <div class="bubble" style="top:130px;left:-65px;">phony</div>
      <div class="bubble" style="bottom:20px;left:-100px;">poser</div>
      <div class="bubble" style="top:90px;right:-100px;">overrated</div>
    </div>
    <form class="nemesis-input-section" autocomplete="off" onsubmit="return false;">
      <div style="width:100%;position:relative;">
        <textarea
          class="ghost-textarea"
          id="ghost-textarea"
          maxlength="256"
          spellcheck="false"
          autocomplete="off"
          autocorrect="off"
          rows="4"
          required
          onfocus="ghostShatter()" 
          oninput="handleInput()"
        ></textarea>
        <div class="ghost-overlay" id="ghost-overlay"></div>
      </div>
      <button type="button" class="nemesis-btn" id="submit-btn">Reveal My Vulnerability</button>
    </form>
  </div>

  <!-- Loader, hidden by default -->
  <div class="nemesis-loader" id="nemesis-loader" style="display:none;">
    <div class="loader-spinner"></div>
    <div class="loader-text" id="loader-text">Analyzing cognitive responseâ€¦<br>Compiling adversarial profileâ€¦</div>
  </div>

  <!-- Vulnerability reveal -->
  <div class="vuln-reveal" id="vuln-reveal" style="display:none;">
    â†’ Core Vulnerability: Reputation Fragility
  </div>
  <button class="nemesis-btn next-btn" id="next-btn" style="display:none;">Advance to Next Adversary Trial</button>

  <!-- Block mobile overlay -->
  <div id="block-mobile-overlay" class="block-mobile-overlay" style="display:none;">
    <div>
      <strong>Device Not Supported</strong>
      This experience is only for laptop/desktop or tablet.<br>
      <span class="warning">Mobile and small screens are strictly blocked.</span>
    </div>
  </div>
  <audio id="type-sound" src="https://cdn.pixabay.com/audio/2022/11/16/audio_12c6bda21a.mp3" preload="auto"></audio>
  <audio id="beep-sound" src="https://cdn.pixabay.com/audio/2022/10/16/audio_12d0bfe91d.mp3" preload="auto"></audio>

  <script>
    // --- MOBILE/TABLET BLOCK ---
    function isMobileDevice() {
      return (typeof window.orientation !== "undefined") || navigator.userAgent.match(/Android|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i);
    }
    function blockMobileIfNeeded() {
      const minW = 768;
      if (isMobileDevice() || window.innerWidth < minW) {
        document.getElementById('block-mobile-overlay').style.display = 'flex';
        document.body.classList.add('blocked');
      } else {
        document.getElementById('block-mobile-overlay').style.display = 'none';
        document.body.classList.remove('blocked');
      }
    }
    window.addEventListener('resize', blockMobileIfNeeded);
    window.addEventListener('DOMContentLoaded', blockMobileIfNeeded);

    // --- GHOST TYPING ---
    const ghostLines = [
      "Heâ€™s just a brand, not a builder.",
      "Everything he made was hype â€” no substance."
    ];
    let ghostActive = true;
    let ghostIndex = 0;
    let ghostChar = 0;
    let ghostTypingTimer;
    let ghostRestoring = false;

    const ghostOverlay = document.getElementById('ghost-overlay');
    const ghostTextarea = document.getElementById('ghost-textarea');

    function renderGhostText() {
      ghostOverlay.innerHTML = ghostLines.join("<br>");
    }

    function startGhostTyping() {
      ghostOverlay.innerHTML = "";
      ghostActive = true;
      ghostIndex = 0;
      ghostChar = 0;
      ghostOverlay.style.opacity = "0.8";
      ghostTypingTimer = setInterval(() => {
        let txt = "";
        for(let i=0;i<ghostLines.length;i++) {
          if (i < ghostIndex) {
            txt += ghostLines[i] + "<br>";
          } else if (i === ghostIndex) {
            txt += ghostLines[i].substring(0, ghostChar) + "<span class='ghost-cursor'>|</span><br>";
          }
        }
        ghostOverlay.innerHTML = txt;
        ghostChar++;
        if(ghostChar > ghostLines[ghostIndex].length) {
          ghostIndex++;
          ghostChar = 0;
        }
        if(ghostIndex >= ghostLines.length) {
          clearInterval(ghostTypingTimer);
          ghostOverlay.innerHTML = ghostLines.join("<br>");
          ghostActive = false;
        }
      }, 42);
    }
    // On load, show ghost text
    document.addEventListener("DOMContentLoaded", () => {
      renderGhostText();
      // Place the ghost text in the textarea as well (for shatter/fade effect)
      ghostTextarea.value = ghostLines.join('\n');
    });

    function ghostShatter() {
      if (ghostActive || ghostOverlay.style.opacity > 0) {
        ghostOverlay.style.opacity = "0";
        setTimeout(() => { ghostOverlay.innerHTML = ""; }, 250);
        ghostTextarea.value = "";
        ghostActive = false;
      }
    }
    function handleInput() {
      // Border pulse
      ghostTextarea.classList.add("pulse");
      setTimeout(()=>ghostTextarea.classList.remove("pulse"), 210);

      // Prevent pasting/copying
      ghostTextarea.onpaste = (e)=>{ e.preventDefault(); return false; }
      ghostTextarea.oncopy = (e)=>{ e.preventDefault(); return false; }
      ghostTextarea.oncut = (e)=>{ e.preventDefault(); return false; }

      if (ghostTextarea.value.length === 0 && !ghostRestoring) {
        // Animate ghost text back in
        ghostRestoring = true;
        ghostOverlay.style.opacity = "0.8";
        ghostTextarea.blur();
        setTimeout(()=> {
          ghostTextarea.value = "";
          startGhostTyping();
          setTimeout(()=>{ ghostRestoring = false; }, 1600);
        }, 450);
      }
    }
    ghostTextarea.addEventListener('keydown', function(e) {
      if (["v","V","c","C"].includes(e.key) && (e.ctrlKey || e.metaKey)) e.preventDefault();
    });

    // --- SPEECH BUBBLES (random fade) ---
    function animateBubbles() {
      const bubbles = document.querySelectorAll('.bubble');
      let del = 0;
      bubbles.forEach((bub, i) => {
        setTimeout(() => {
          bub.style.opacity = 1;
          bub.style.transform = "translateY(-10px) scale(1.05)";
          setTimeout(() => {
            bub.style.opacity = 0.2;
            bub.style.transform = "translateY(10px) scale(0.97)";
          }, 4100 + 900*Math.random());
        }, del + Math.random()*1000);
        del += 130;
      });
      setTimeout(animateBubbles, 5000);
    }
    document.addEventListener('DOMContentLoaded', animateBubbles);

    // --- TIMER ---
    let timerSec = 420;
    let timerRunning = true;
    let timerPaused = false;
    const timerElem = document.getElementById('nemesis-timer');

    function pad(x) { return String(x).padStart(2,'0'); }
    function renderTimer() {
      const min = Math.floor(timerSec/60);
      const sec = timerSec%60;
      timerElem.textContent = pad(min)+":"+pad(sec);
      if(timerSec <= 0) {
        timerElem.textContent = "00:00";
        timerElem.style.color = "#ff3b44";
        timerElem.classList.add('paused');
        timerRunning = false;
      }
    }
    function startTimer() {
      renderTimer();
      if(!timerRunning) return;
      setTimeout(()=> {
        if(timerRunning && !timerPaused) {
          timerSec--;
          renderTimer();
          startTimer();
        }
      }, 1000);
    }
    startTimer();

    function pauseTimer() {
      timerPaused = true;
      timerElem.classList.add("paused");
    }
    function resumeTimer() {
      timerPaused = false;
      timerElem.classList.remove("paused");
    }

    // --- SIMULATED SUBMISSION FLOW ---
    const submitBtn = document.getElementById('submit-btn');
    const loader = document.getElementById('nemesis-loader');
    const vulnReveal = document.getElementById('vuln-reveal');
    const nextBtn = document.getElementById('next-btn');

    submitBtn.addEventListener('click', async function() {
      // Validation
      if (ghostTextarea.value.trim().length < 5) {
        ghostTextarea.focus();
        ghostTextarea.classList.add("pulse");
        return;
      }
      // Lock input
      ghostTextarea.readOnly = true;
      submitBtn.disabled = true;
      pauseTimer();

      // Show loader, random delay
      loader.style.display = "flex";
      let dots = 0;
      let phase = 1;
      const loaderText = document.getElementById('loader-text');
      const phases = [
        "Analyzing cognitive responseâ€¦",
        "Compiling adversarial profileâ€¦"
      ];
      let totalTime = 4000 + Math.random()*8000; // 4-12 seconds
      let elapsed = 0;
      const intv = setInterval(() => {
        loaderText.innerHTML = phases[phase-1] + '<br>' + '.'.repeat((dots%4)+1);
        dots++;
        if (dots % 7 === 0 && phase < phases.length) phase++;
        elapsed += 340;
        if (elapsed > totalTime) {
          clearInterval(intv);
          loader.style.display = "none";
          revealVulnerability();
        }
      }, 340);
    });

    function revealVulnerability() {
      // Show annotation
      vulnReveal.style.display = "block";
      // Animate in the "Next" button
      nextBtn.style.display = "block";
      nextBtn.style.opacity = 1;
      nextBtn.style.pointerEvents = 'all';
      setTimeout(() => {
        nextBtn.focus();
      }, 1500);
    }

    // --- NEXT BUTTON LOGIC ---
    nextBtn.addEventListener('click', function() {
      window.location.href = "page3.html";
    });

    // --- SECURITY/RESTRICTION LOGIC ---
    // Block context menu, clipboard, back navigation, etc.
    document.addEventListener('contextmenu', function(e) { e.preventDefault(); });
    document.addEventListener('copy', function(e) { e.preventDefault(); });
    document.addEventListener('paste', function(e) { e.preventDefault(); });
    document.addEventListener('cut', function(e) { e.preventDefault(); });
    document.addEventListener('selectstart', function(e) { if(e.target.tagName !== "TEXTAREA") e.preventDefault(); });

    // Disable PrintScreen as much as possible (focus loss overlay)
    let lastActive = Date.now();
    window.onblur = () => {
      document.body.classList.add('blocked');
      setTimeout(()=>{document.body.classList.remove('blocked');},1100);
    }
    window.onfocus = () => { document.body.classList.remove('blocked'); };

    // Block navigation (back/forward)
    history.pushState(null, null, document.URL);
    window.addEventListener('popstate', function () {
      history.pushState(null, null, document.URL);
    });

    // Disable save/refresh memory
    window.onbeforeunload = function(){ return undefined; }

    // Try to block print screen and other screenshot shortcuts (limited by browser security)
    document.addEventListener('keyup', function(e) {
      if(e.key === "PrintScreen" || (e.ctrlKey && e.key === "p")) {
        document.body.classList.add('blocked');
        setTimeout(()=>{document.body.classList.remove('blocked');},1100);
        alert("Screenshots are not permitted in this simulation.");
      }
    });

    // --- SOUNDS (optional ambient typing/console beep) ---
    let typeSound = document.getElementById('type-sound');
    let beepSound = document.getElementById('beep-sound');
    ghostTextarea.addEventListener('keydown', function(e){
      if (!e.metaKey && !e.ctrlKey && !ghostRestoring) {
        if(typeSound && typeSound.currentTime < 0.1) {
          typeSound.currentTime = 0;
          typeSound.play();
        }
      }
    });

    // --- AMBIENT SOUND TOGGLE (optional) ---
    // Could add a mute/unmute button if desired.
    // Skipped for brevity.

  </script>
</body>
</html>
